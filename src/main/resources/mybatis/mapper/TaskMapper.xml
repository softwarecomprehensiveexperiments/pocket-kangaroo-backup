<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kangaroo.backup.Dao.TaskMapper">
    <sql id="Base_column_list">
        task_id, task_title, task_deadLineDate, task_content, task_price, task_publisherId,
        task_receiversId, task_publishDate, task_type, task_completeDate, task_state
    </sql>
    <select id="getTaskList" resultType="com.kangaroo.backup.Domain.Task">
        SELECT
        <include refid="Base_column_list"/>
        FROM kangaroo.task
    </select>
    <select id="getTaskListByTitle" parameterType="String" resultType="com.kangaroo.backup.Domain.Task">
        SELECT
        <include refid="Base_column_list"/>
        FROM kangaroo.task WHERE task_title=#{taskTitle}
    </select>
    <select id="getTaskListByType" parameterType="String" resultType="com.kangaroo.backup.Domain.Task">
        SELECT
        <include refid="Base_column_list"/>
        FROM kangaroo.task WHERE task_type=#{taskType}
    </select>
    <select id="getTaskListByPublisher" parameterType="int" resultType="com.kangaroo.backup.Domain.Task">
        SELECT
        <include refid="Base_column_list"/>
        FROM kangaroo.task WHERE task_publisherId=#{taskPublisherId}
    </select>
    <select id="getTaskListByCompleteDate" parameterType="Date" resultType="com.kangaroo.backup.Domain.Task">
        SELECT
        <include refid="Base_column_list"/>
        FROM kangaroo.task WHERE task_completeDate>=#{taskCompleteDate}
    </select>
    <insert id="insert" parameterType="com.kangaroo.backup.Domain.Task">
        INSERT INTO kangaroo.task(task_title, task_deadLineDate, task_content, task_price, task_publisherId, task_receiversId, task_publishDate, task_type, task_completeDate, task_state)
        VALUES (#{taskTitle},#{taskDeadLineDate},#{taskContent},#{taskPrice},#{taskPublisherId},#{taskReceiversId},#{taskPublishDate},#{taskType},#{taskCompleteDate},#{taskSate})
    </insert>
    <update id="update" parameterType="com.kangaroo.backup.Domain.Task">
        UPDATE kangaroo.task
        <set>
            <if test="taskTitle!=null">task_title=#{taskTitle},</if>
            <if test="taskDeadLineDate!=null">task_deadLineDate=#{taskDeadLineDate},</if>
            <if test="taskContent!=null">task_content=#{taskContent},</if>
            <if test="taskPrice!=null">task_price=#{taskPrice},</if>
            <if test="taskPublisherId!=null">task_publisherId=#{taskPublisherId},</if>
            <if test="taskReceiversId!=null">task_receiversId=#{taskReceiversId},</if>
            <if test="taskPublishDate!=null">task_publishDate=#{taskPublishDate},</if>
            <if test="taskType!=null">task_type=#{taskType},</if>
            <if test="taskCompleteDate!=null">task_completeDate=#{taskCompleteDate},</if>
            <if test="taskSate!=null">task_state=#{taskSate}</if>
        </set>
        WHERE task_id=#{taskId}
    </update>
    <delete id="delete" parameterType="int">
        DELETE FROM kangaroo.task
        WHERE task_id=#{taskId}
    </delete>
</mapper>